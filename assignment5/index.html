<html>
 <!-- MoSIS Assignments template -->

 <title>MoSIS Assignment 5</title>

 <body bgcolor="#ffffff">

 <hr noshade>

   <h1>MoSIS Assignment 5</h1>

    <h2>Team</h2>
     <pre>
      Name       :	Daniëlle Jongstra
      Student ID :	20172260
      e-mail     :	Danielle.jongstra@student.uantwerpen.be

      Name       :	Joanna Kisaakye
      Student ID :	20205490
      e-mail     :	joanna.kisaakye@student.uantwerpen.be

      Time spent on this assignment (in hours): 12
     </pre>

 
    <h2>Statechart: location switch</h2>
		<p>
		The part of the statechart for going to work when at home, or going home when at work, can be seen in fig. 1. The states are conveniently named to denote what is happening as well as possible.
		On the top-left is the at home state. This is where the employee initially is, and where he will return to whenever he leaves work. The shift buttons are hidden when the state is entered and the message is set to "at home".
		When the state is left, the employees energy is increased with 50%. There are no checks to make sure that the total energy cannot surpass 100%, because we noticed during testing that the python application makes sure the energy is never above 100%.
		The energy increase could also have been done when entering the home state, but it felt more realistic to do this when leaving the state. While in this state and receiving an event to go to home, nothing happens. This also means that the employee cannot go home twice without going to work to improve his energy by more than 50%.
		<br><br>
		The event for going to work causes a state transition to the composite state "at work". We enter this state by first going to the composite state "grace period". By entering the grace period, the shifts are shown. 
		The grace period is automatically ended after 4 seconds, after which a transition into actually working is made.
		The initial state in the grace period is "inGrace", which randomly chooses one of the three shift and highlights this shift blue. The employee can now wait to start the shift, or choose another shift.
		By choosing another shift, the transition to "Alternative Chosen" is taken. This highlights the chosen shift blue and also sets this shift internally as the shift that is going to be done. There is a transition to itself in this state, because the employee can keep changing his shift while in the grace period.
		When in the grace period the employee can still decide to go home, whether he has chosen a shift or it was only randomly assigned. Therefore, there is a transition from the composite grace period to the state "leave day".
		This state indicates that the employee is going home, and after 2 seconds the transition to being home is made.
		<br><br>
		The employee can also be forced to go home. This happens if at the end of the shift the employee has less than 25% energy left. The states corresponding to this are in the bottom-left corner.
		In the state "shiftEnd", we can see that the employee is payed and that the actions that can be done during the shift are hidden from the ui. From this state, the transition to the at home state is immediately taken if the energy-levels are below 25%.
		Otherwise, the transition to the composite state "at work" is taken, where the employee will enter the grace period again. In this grace period, the employee can again decide if he is going to work or if he is going home.
		
		
		
		<figure>
		<img src="./img/Statechart1.png">
		<figcaption>Figure 1: The parts of the statechart for going to another location</figcaption>
		</figure>
		
		</p>

    <h2>Statechart: doing shifts</h2>
	<p>
	In fig. 2 are the parts in the statechart that have to do with doing shifts. As previously mentioned, we get in the composite state "At shift" by taking the transition from the grace period after 4 seconds.
	When the at shift state is entered, the shift that the employee is going to work is highlighted green as active. In the composite state, the initial transition is taken to the assigned or chosen shift.
	If the shift is unloading, the transition will be taken to the composite state "unloading". This state starts at the truck without the employee carrying anything. By holding the actions buttons for at least half a second,
	the employee can do one of the actions specified in the state he is in. By doing an entire sequence of walk, pickup, walk, drop, one piece of material is added to the stock.
	<br><br>
	The assembly state takes away material and adds a finished product every time the assembly button is held. A transition to the state Assembly is taken in this case. 
	It stays for a second in this state, so that it is clear from the message that the assembling action succeeded.
	<br><br>
	The unloading state is similar to loading. However, now finished product is picked up at the stock and dropped at the truck. A finished product can only be picked up if there is at least 1 finished product in stock.
	When it is picked up, the stock is reduced by 1.
	<br><br>
	On the left side of fig. 2, a transition to the previously discussed state "endShift" can be found. This transition is taken 14 seconds after entering the composite state "at work".
	This 14 seconds has 10 seconds for doing the shift, and 4 for being in the grace period. There is not a 10 second transition from the composite shift state, because the toilet break state we are going to discuss next is not in this state.
	
	
	<figure>
		<img src="./img/Statechart2.png">
		<figcaption>Figure 2: The parts of the statechart for doing a shift</figcaption>
		</figure>
	</p>
	
	<h2>Statechart: toilet break</h2>
	<p>
	In fig. 3, the most important state(s) for the toilet break are visible. The state can be entered from loading or unloading. The employee has to be in stock and cannot be carrying anything to go on a toilet break.
	To go to the toilet, the toilet break button has to be clicked. It does not have to be hold for at least 0.5 seconds. If the shift ends (after 10 seconds), the transition to the endShift state is automatically taken, even though the employee is on the toilet.
	This is possible thanks to the 14 second transition from the entire at shift state. The employee can also end his toilet break during the shift by clicking on "done". This causes a transition to the history state.
	The history state will return the employee to the shift he was taking, without having to check the assigned shift variable again.
	
	
	<figure>
		<img src="./img/Statechart3.png">
		<figcaption>Figure 3: The parts of the statechart for going on a toilet break</figcaption>
		</figure>
	</p>
	
	
	<h2>Statechart: tiring & buttons</h2>
	<p>
	Orthogonal states to the shift states, are the button and tiring state(s) in fig. 4. Both have to happen independently of what is happening in the shift states and at the same time.
	The time part is exists of a single state. After every second in the composite state "atShift", the energy levels of the employee is lowered by 2. 
	This is also the reason why the toilet break is not part of the composite state "atShift", because the energy should not be lowered while on the toilet.
	Another orthogonal state is for pressing and holding the buttons. It starts in the state where the button is released. As soon as the button is pressed, it goes to the state denoting this.
	After half a second of holding, the button becomes activated and the variable currentAction is set to the pressed button. The activated state can only be left by releasing the button.
	This way, it is not possible to perform an action twice by holding the button for a second. If a button is held for less than half a second, the state will again be button released without setting the current action.
	The currentAction variable is reset to a empty string every time after a transition that uses the variable is taken, to prevent using one action for multiple transitions (eg. assembling two products without only one click).
	
	<figure>
		<img src="./img/Statechart4.png">
		<figcaption>Figure 4: The parts of the statechart for tiring and handling button holds</figcaption>
		</figure>
	</p>
	
	<h2>Statechart: full</h2>
	<p>
	The full statechart can be found in fig. 5.
	
	<figure>
		<img src="./img/Statechart.png">
		<figcaption>Figure 5: The full statechart</figcaption>
		</figure>
	</p>
	
	</p>
	
	
	<h2>Workflow and tasks: Joanna</h2>
	
	
	<h2>Workflow and tasks: Daniëlle</h2>
	<p>
	As Joanna started the statechart, I checked every requirement to see if it was working properly. For all that were not working or not implemented yet, the proper alterations would be made to the statechart to make it work.
	When it worked, the same would happen for the next requirement, until all the requirements were satisfied by the statechart. The testing was done using the provided UI.
	
	</p>
     

 <hr noshade>

 </body>
</html>